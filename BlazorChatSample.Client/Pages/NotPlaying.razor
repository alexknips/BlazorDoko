<p>
    Enter your name and seat number to start playing:
</p>

<input type="text" maxlength="32" placeholder="playername" @bind="@username" />
<input type="text" maxlength="32" placeholder="1" @bind="@seatnumber" />
<button type="button" @onclick="@Join"><span class="oi oi-chat" aria-hidden="true"></span> Join!</button>
@* <div>
    <input type="checkbox" id="hosting" name="hosting" Checked="@hosting">
    <label for="hosting">host</label>
</div> *@

@if (message != null)
{
    <div class="invalid-feedback">@message</div>
    <small id="emailHelp" class="form-text text-muted">@message</small>
}

@code  {
   // name of the user who will be playing
    string username = null;
    // where does this person sit?
    string seatnumber = null;

        // on-screen message
    string message = null;

    /// <summary>
    /// Start chat client
    /// </summary>
    async Task Join()
    {
        // check username is valid
        if (string.IsNullOrWhiteSpace(username))
        {
            message = "Please enter a name";
            return;
        };
        // check username is valid
        if (string.IsNullOrWhiteSpace(seatnumber))
        {
            seatnumber = "10"; // sitting at end
            @* message = "Please enter a seat number"; *@
            @* return; *@
        }
        try{
            int.Parse(seatnumber);
        }
        catch{
            message = "Please enter a seat number";
            return;
        }

        @* try
        {
            // remove old messages if any
            messages.Clear();

            // Create the chat client
            string baseUrl = navigationManager.BaseUri;
            client = new GameClient(username, int.Parse(seatnumber), baseUrl);
            // add an event handler for incoming messages
            client.MessageReceived += MessageReceived;
            client.GameUpdateReceived += UpdateGameState;
            // start the client
            await client.StartAsync();

            playing = true;
        }
        catch (Exception e)
        {
            message = $"ERROR: Failed to start chat client: {e.Message}";
            Console.WriteLine(e.Message);
            Console.WriteLine(e.StackTrace);
        } *@
    }
}